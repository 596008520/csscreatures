function prettyDate(e){var a=new Date((e||"").replace(/-/g,"/").replace(/[TZ]/g," ")),t=((new Date).getTime()-a.getTime())/1e3,n=Math.floor(t/86400);if(!(isNaN(n)||n<0||n>=31))return 0==n&&(t<60&&"Just now"||t<120&&"1 minute ago"||t<3600&&Math.floor(t/60)+" minutes ago"||t<7200&&"1 hour ago"||t<86400&&Math.floor(t/3600)+" hours ago")||1==n&&"1 day ago"||n<7&&n+" days ago"||7==n&&"1 week ago"||n<31&&Math.ceil(n/7)+" weeks ago"}function randomAnimationTiming(e){return"animation-duration: "+Math.floor(100*(e/2+Math.random()*e))/100+"s; animation-delay: -"+Math.floor(100*(e/2+Math.random()*e))/100+"s"}function getColor(e){var a=e.match(/(#?([A-Fa-f0-9]){3}(([A-Fa-f0-9]){3})?)/gm),t=["aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|transparent|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen"],n=e.match(RegExp("\\b"+t+"\\b"));if(a)i=a[0];if(n)var i=n[0];return"background-color: "+i+"; "}function getTweets(){var e=Math.random().toString(36).substring(7),a=new XMLHttpRequest;a.open("GET","search.php?"+e,!0),a.onload=function(){var e=this.status;if(200==e){var a=JSON.parse(this.response);a.statuses.length>0?parseTweets(a):defaultTweets("Where is everyone?","Be the first to have your creature here! Send a tweet to @csscreatures!")}420!=e&&429!=e||defaultTweets("Too busy!","We're sorry, there's a lot of people visiting right now and we can't keep up. Please come back another time."),500!=e&&502!=e||defaultTweets("Twitter is down!","It looks like Twitter isn't working right now. You'll have to come back another time.")},a.onerror=function(){defaultTweets("Oh no!","Something isn't working. Please com eback another time.")},a.send()}function parseTweets(e){if(e.statuses.length>0)for(i=0,len=e.statuses.length;i<len;++i){var a=e.statuses[i];e.statuses.length>3?2==i&&(document.querySelector(".creatures").innerHTML+=carbon_ad):1==i&&(document.querySelector(".creatures").innerHTML+=carbon_ad),1==e.statuses.length?(buildCreature(a,i),document.querySelector(".creatures").innerHTML+=carbon_ad):buildCreature(a,i)}else defaultTweets()}function defaultTweets(e,a){var t='<div class="item default-box creature-box mod-tooth mod-sad"><div class="creature" style="background-color: tomato; animation-duration: 5.33s; animation-delay: -6.11s"><div class="face" style="animation-duration: 6s; animation-delay: -7s"><div class="eyes"><div class="eye" style="animation-duration: 6s; animation-delay: -5s"></div><div class="eye" style="animation-duration: 6s; animation-delay: -5s"></div></div><div class="mouth"><div class="tooth"></div></div></div></div><div class="info"><h2>'+e+"</h2><h3>"+a+"</h3></div></div>";document.querySelector(".creatures").innerHTML+=t,document.querySelector(".creatures").innerHTML+=carbon_ad}function buildCreature(e,a){for(var t=e.text.replace("@csscreatures ","").toLowerCase(),n=[],i=[{mod:"angry",syn:"furious|mad|shake|shaking"},{mod:"camouflage",syn:"camo|ghillie|hidden|military|soldier|troop"},{mod:"cyclops",syn:"one-eye|one-eyed|monster|wazowski"},{mod:"dark",syn:"black|#000|#000000"},{mod:"ghost",syn:"casper|scary|spooky"},{mod:"hungry",syn:"eating|fat|plump|talk|talking"},{mod:"hyper",syn:"animated|excited|happy|pumped|super"},{mod:"jack-o-lantern",syn:"halloween|pumpkin"},{mod:"moustache",syn:"mustache|hairy"},{mod:"nervous",syn:"anxious|scared"},{mod:"sad",syn:"crying|depressed|upset"},{mod:"sleepy",syn:"asleep|sleep|sleeping|sleepy|tired|rest|resting|quiet"},{mod:"square",syn:"box|boxy|minecraft|robot|robotic"},{mod:"tall",syn:"big|giant|gigantic|huge|skinny|thin"},{mod:"tiny",syn:"baby|dwarf|little|mini|miniature|petite|short|small"},{mod:"teeth",syn:"smile|smiling"},{mod:"transparent",syn:"checker|checkerboard|checkered|invisible|see-through|translucent"},{mod:"tooth",syn:"hillbilly"},{mod:"upside-down",syn:"backwards|upsidedown|rollover"},{mod:"wink",syn:"winking"}],r=0;r<i.length;r++){var o=RegExp("\\b"+i[r].mod+"|"+i[r].syn+"\\b");t.match(o)&&n.push("mod-"+i[r].mod)}var s='<div class="eye" style="'+randomAnimationTiming(5)+'"></div>',l='<div class="eyes">'+s+s+"</div>";if(n.indexOf("mod-cyclops")>-1)l='<div class="eyes">'+s+"</div>";d="";if(n.indexOf("mod-moustache")>-1)var d='<svg class="moustache" xmlns="http://www.w3.org/2000/svg" viewBox="83 299 443 121" preserveAspectRatio="none" width="220" height="60"><path d="M407 338C402 336 398 332 395 330 382 318 364 300 338 300 325 300 313 305 305 313 296 305 284 300 271 300 245 300 227 318 215 330 211 332 207 336 202 338 126 377 84 345 84 345 151 462 265 411 295 390 299 388 302 386 305 383 307 386 311 388 314 390 344 411 459 462 526 345Z" fill="#3F1F13"/></svg>';var c='<div class="tooth"></div>',m='<div class="mouth"></div>';if(n.indexOf("mod-tooth")>-1)m='<div class="mouth">'+c+"</div>";if(n.indexOf("mod-teeth")>-1||n.indexOf("mod-jack-o-lantern")>-1)m='<div class="mouth">'+c+c+"</div>";var u='<div id="'+("creature_"+a)+'" class="item creature-box '+n.join(" ")+'"><div class="creature" style="'+getColor(t)+randomAnimationTiming(5)+'"><div class="face" style="'+randomAnimationTiming(5)+'">'+l+d+m+'</div></div><div class="info"><h3><a href="https://twitter.com/'+e.user.screen_name+"/status/"+e.id_str+'">@'+e.user.screen_name+"</a></h3><h3>"+prettyDate(e.created_at)+"</h3></div></div>";document.querySelector(".creatures").innerHTML+=u}function handleDirectionsToggle(){for(var e=document.querySelectorAll(".directions-toggle"),a=(document.querySelector(".directions-box"),document.querySelector(".creatures")),t=0;t<e.length;t++)e[t].addEventListener("click",function(){document.querySelector("html").classList.toggle("showing-directions"),window.scrollTo(0,0)});a.addEventListener("click",function(){document.querySelector("html").classList.contains("showing-directions")&&(document.querySelector("html").classList.remove("showing-directions"),window.scrollTo(0,0))})}function autoPause(){var e=document.createElement("style");document.querySelector("body").appendChild(e),document.addEventListener("visibilitychange",function(){document.hidden?e.innerHTML="* { animation-play-state: paused !important; }":setTimeout(function(){e.innerHTML=""},300)})}function init(){getTweets(),handleDirectionsToggle(),autoPause()}var carbon_ad='<div class="item ad-box"><div class="carbon-ad" id="carbonads"><span><span class="carbon-wrap"><a href="//srv.carbonads.net/ads/click/x/GTND42QECWSD6KQJCVS4YKQMCTBIP2QWCVBITZ3JCWYDP27ICKBI55QKC6BIT2QNCVYDEK3EHJNCLSIZZRLCP7I35MNFV?segment=placement:bennettfeelycom;&amp;encredirect=https%3A%2F%2Fslack.com%2Flp%3Fcvosrc%3Ddisplay.carbon.plain%20dev%26utm_source%3Dcarbon%26utm_medium%3Ddisplay%26utm_campaign%3Dplain%20dev%26c3ch%3DCarbon%20Networks%26c3nid%3DPlain%20Dev" class="carbon-img" target="_blank" rel="noopener"><img src="https://assets.servedby-buysellads.com/p/manage/asset/id/32052" alt="" border="0" height="100" width="130" style="max-width: 130px;"></a><a href="//srv.carbonads.net/ads/click/x/GTND42QECWSD6KQJCVS4YKQMCTBIP2QWCVBITZ3JCWYDP27ICKBI55QKC6BIT2QNCVYDEK3EHJNCLSIZZRLCP7I35MNFV?segment=placement:bennettfeelycom;&amp;encredirect=https%3A%2F%2Fslack.com%2Flp%3Fcvosrc%3Ddisplay.carbon.plain%20dev%26utm_source%3Dcarbon%26utm_medium%3Ddisplay%26utm_campaign%3Dplain%20dev%26c3ch%3DCarbon%20Networks%26c3nid%3DPlain%20Dev" class="carbon-text" target="_blank" rel="noopener">All the tools your team needs in one place. Slack: Where work happens.</a></span><a href="http://carbonads.net/?utm_source=bennettfeelycom&amp;utm_medium=ad_via_link&amp;utm_campaign=in_unit&amp;utm_term=carbon" class="carbon-poweredby" target="_blank">ads via Carbon</a><img src="https://slack.sp1.convertro.com/view/vt/v1/slack/0/cvo.gif?cvosrc=display.carbon.plain dev&amp;utm_source=carbon&amp;utm_medium=display&amp;utm_campaign=plain dev" border="0" height="1" width="1" style="display: none;"><img src="https://569-img.c3tag.com/v.gif?cid=569&amp;c3ch=Carbon Networks&amp;c3nid=Plain Dev" border="0" height="1" width="1" style="display: none;"></span></div></div></div>';init();